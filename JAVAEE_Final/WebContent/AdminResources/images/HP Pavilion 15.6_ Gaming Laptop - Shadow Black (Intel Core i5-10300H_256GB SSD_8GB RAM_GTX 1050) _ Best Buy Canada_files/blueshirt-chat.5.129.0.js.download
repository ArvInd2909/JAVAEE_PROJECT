var blueShirtChatState={status:{chatIframeLoading:!0,agentOnline:!1}};!function(){var a={INIT_CHAT:"INIT_CHAT",LAUNCH_CHAT:"LAUNCH_CHAT"},t="BLUE_SHIRT_AGENT_CHAT_ENDED",e="BLUE_SHIRT_AGENT_IFRAME_LOADED",i="BLUE_SHIRT_AGENT_MAXIMIZED",n="BLUE_SHIRT_AGENT_MINIMIZED",d="BLUE_SHIRT_AGENT_AVAILABLE",r="BLUE_SHIRT_AGENT_UNAVAILABLE",s="BLUE_SHIRT_AGENT_INIT_CHAT_CONFIG",h="BLUE_SHIRT_AGENT_INIT_CHAT",u="BLUE_SHIRT_AGENT_LAUNCH_CHAT",o="BLUE_SHIRT_AGENT_IFRAME_PDP_STYLE";"undefined"!=typeof window&&(window.addEventListener("BLUE_SHIRT_AGENT_CHAT_STARTED",function(t){S({active:!0,isDesktop:t.detail&&"DESKTOP"===t.detail.device,isTablet:t.detail&&"TABLET"===t.detail.device,isPhone:t.detail&&"PHONE"===t.detail.device,status:Object.assign({},blueShirtChatState.status,{chatStarted:!0})}),E()}),window.addEventListener(t,function(){S({active:!1}),E()}),window.addEventListener(e,function(t){A(t),S({status:Object.assign({},blueShirtChatState.status,{chatIframeLoading:!0})})}),window.addEventListener(i,function(){S({minimized:!1}),E()}),window.addEventListener(n,function(){S({minimized:!0}),E()}),window.addEventListener(s,function(t){document.getElementById(l)||(document.body.appendChild(_),S({event:{params:Object.assign({},t.detail.config,{AVATAR_IMG:t.detail.AVATAR_IMG||"/client/bby-avatar.png",LOCALE:t.detail.LOCALE||"en",BACK_IMG_EN:t.detail.BACK_IMG_EN||"/client/blueshirt-header-en.jpg",BACK_IMG_FR:t.detail.BACK_IMG_FR||"/client/blueshirt-header-fr.jpg",ADOBE_VISITOR_ID:t.detail.ADOBE_VISITOR_ID})}}))}),window.addEventListener(h,A),window.addEventListener(u,function(i){!function(){var t,e=document.getElementById(l);e&&(t=i.origin||"*",e.contentWindow.postMessage({eventName:a.LAUNCH_CHAT,detail:{pdpUrl:window.location.href}},t))}()}),window.addEventListener(r,function(){S({status:Object.assign({},blueShirtChatState.status,{agentOnline:!1,chatIframeLoading:!1})})}),window.addEventListener(d,function(){S({status:Object.assign({},blueShirtChatState.status,{agentOnline:!0,chatIframeLoading:!1})})}),window.addEventListener(o,function(t){S({isPdp:t.detail.isPdp}),E()}));var l="blue-shirt-chat-iframe",_=(d=document.createElement("iframe"),o=l,d.setAttribute("src","/client/blue-shirt-agent.html"),d.setAttribute("class","blueShirtChatFrame"),d.setAttribute("id",o),d.setAttribute("data-automation","blue-shirt-chat-iframe"),d);function A(t){var e;(e=document.getElementById(l))&&blueShirtChatState.event&&blueShirtChatState.event.params?(t=t.origin||"*",e.contentWindow.postMessage({detail:blueShirtChatState.event.params,eventName:a.INIT_CHAT},t)):console.error("Chat configuration not found")}function E(){var t;t=["blueShirtChatFrame",blueShirtChatState.active?"blueShirtChatActive":"",blueShirtChatState.isDesktop?"blueShirtChatDesktop":"",blueShirtChatState.isTablet?"blueShirtChatTablet":"",blueShirtChatState.isPhone?"blueShirtChatPhone":"",blueShirtChatState.minimized?"blueShirtChatMinimized":"",blueShirtChatState.isPdp?"blueShirtChatPdp":""].join(" ").trim(),document&&document.getElementById(l).setAttribute("class",t)}function S(t){blueShirtChatState=Object.assign({},blueShirtChatState,t)}}();